<%= render "social_networking/shared/nav" %>

<div ng-controller="ProfilesCtrl as profiles">

  <div ng-repeat="profile in profiles.members">
    <div class="profiles-username">
      <a href="<%= social_networking_profile_path %>/{{ profile.id }}">{{ profile.username }}</a>
    </div>
    <div class="profiles-last-online">
      Last seen: {{ profile.latestAction | timeFromNow }}
    </div>
    <dl>
      <dt ng-repeat-start="r in profile.responses">{{ r.question }}</dt>
      <dd ng-repeat-end>{{ r.text }}</dd>
    </dl>
  </div>
</div>

<!-- bootstrap Angular app with current participant id -->
<script>
  angular.module('socialNetworking').value('participantId', <%= current_participant.id %>).value('profileId', <%= @profile.id %>);
</script>
